language: swift
osx_image: xcode11.1
script:
  - xcodebuild -scheme standard-swift -sdk iphonesimulator -derivedDataPath Build/ -destination 'platform=iOS Simulator,name=iPhone 11,OS=13.1' -enableCodeCoverage YES clean build test
  - pwd
  - cd Build/Build
  - ls -R
  - cd ProfileData
  - cd $(ls -d */|head -n 1)
  - directory=${PWD##*/} 
  - pathCoverage=Build/Build/ProfileData/${directory}/Coverage.profdata
  - echo $pathCoverage
  - echo $directory
  - cd ../../../
  - pwd
  - xcrun llvm-cov export -format="lcov" -instr-profile $pathCoverage Build/Build/Products/Debug-iphonesimulator/standard-swift.app/standard-swift > info.lcov
  - bash <(curl https://codecov.io/bash)
